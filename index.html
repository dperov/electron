<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ö–∞—Ä—Ç–∏–Ω–∫–æViewer Tabs</title>
  <style>
    html, body {height: 100%; margin:0; padding:0; background:#171717; overflow:hidden;}
    #topbar {padding:8px; background:#2a2a2a; color:#fff;}
    #tabs {display: flex; background: #232323;}
    .tab {
      padding: 8px 14px; cursor:pointer; background:#333; color:#fff;
      border-right:1px solid #444; user-select:none;
      position:relative;
    }
    .tab.active {background:#444;}
    .tab .tab-close {
      position:absolute;top:3px;right:6px; color:#ccc;font-weight:bold;cursor:pointer;
    }
    #addtab {font-weight:bold;padding:8px 13px;}
    #viewerArea { width: 100vw; height: 90vh; position: relative; background: #171717;}
    .imgbox {
      display:none;
      position:absolute; left:0; top:0; width:100%; height:100%; cursor:grab;
      overflow:hidden;
    }
    .imgbox.active {display:block;}
    .imgbox img {user-select:none; pointer-events:none; will-change:transform;}
    #dropzone {
      position:absolute;left:0;top:0;width:100vw;height:100vh;display:none;
      z-index:10; background:rgba(0,0,0,0.20); color:white; font-size:2em; align-items:center;justify-content:center;
    }
    button {margin-left: 12px;}
    .crosshair-lines {
      pointer-events: none;
      position: absolute;
      left: 0; top: 0; width: 100%; height: 100%;
      z-index: 100;
    }
    .crosshair-lines .hline, .crosshair-lines .vline {
      position: absolute;
      background: #6cf;
      opacity: 0.7;
      pointer-events: none;
    }
    .crosshair-lines .hline {
      height: 1px;
      width: 100%;
    }
    .crosshair-lines .vline {
      width: 1px;
      height: 100%;
    }
  </style>
</head>
<body>
  <div id="topbar">
    <button onclick="openImage()">–û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª</button>
  </div>
  <div id="statusbar" style="padding:8px;background:#222;color:#fff;display:flex;gap:20px;align-items:center;">
    <span>
      <button id="mode-move" class="mode-btn active" title="–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ/–º–∞—Å—à—Ç–∞–± (V)">üñêÔ∏è</button>
      <button id="mode-rect" class="mode-btn" title="–í—ã–¥–µ–ª–µ–Ω–∏–µ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞ (R)">‚¨õ</button>
      <button id="copy-rect" class="mode-btn" title="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–µ" disabled>üìã</button>
      <button id="set-transform" class="mode-btn" title="–ó–∞–¥–∞—Ç—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ" disabled>‚ÜîÔ∏è</button>
    </span>
    <span>X: <input id="coordX" type="text" readonly style="width:60px;background:#333;color:#fff;border:none;padding:2px 6px;"></span>
    <span>Y: <input id="coordY" type="text" readonly style="width:60px;background:#333;color:#fff;border:none;padding:2px 6px;"></span>
    <span>UserX: <input id="userX" type="text" readonly style="width:130px;background:#333;color:#8fd;border:none;padding:2px 6px;"></span>
    <span>UserY: <input id="userY" type="text" readonly style="width:70px;background:#333;color:#8fd;border:none;padding:2px 6px;"></span>
  </div>
  <div id="tabs"></div>
  <div id="viewerArea"></div>
  <div id="dropzone">–°–±—Ä–æ—Å—å—Ç–µ —Ñ–∞–π–ª—ã —Å—é–¥–∞‚Ä¶</div>
  <div id="transform-modal" style="display:none;position:fixed;left:0;top:0;width:100vw;height:100vh;z-index:1000;background:rgba(0,0,0,0.5);align-items:center;justify-content:center;">
    <div style="background:#222;padding:24px 32px;border-radius:10px;box-shadow:0 0 20px #000;min-width:320px;">
      <h3 style="color:#fff;">–ó–∞–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã</h3>
      <div style="color:#fff;margin-bottom:10px;">
        –í–≤–µ–¥–∏—Ç–µ –≥—Ä–∞–Ω–∏—Ü—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞:<br>
        (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã —Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ –∏ —Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö)
      </div>
      <table style="color:#fff;margin-bottom:10px;">
        <tr><td></td><td>–ó–Ω–∞—á–µ–Ω–∏–µ</td></tr>
        <tr><td>–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å –Ω–∞—á–∞–ª–æ (X<sub>min</sub>)</td>
            <td><input id="ux0" type="datetime-local" style="width:170px"></td></tr>
        <tr><td>–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å –∫–æ–Ω–µ—Ü (X<sub>max</sub>)</td>
            <td><input id="ux1" type="datetime-local" style="width:170px"></td></tr>
        <tr><td>–í–µ—Ä—Ç–∏–∫–∞–ª—å –Ω–∞—á–∞–ª–æ (Y<sub>min</sub>)</td>
            <td><input id="uy0" style="width:80px"></td></tr>
        <tr><td>–í–µ—Ä—Ç–∏–∫–∞–ª—å –∫–æ–Ω–µ—Ü (Y<sub>max</sub>)</td>
            <td><input id="uy1" style="width:80px"></td></tr>
      </table>
      <button id="apply-transform">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
      <button id="cancel-transform">–û—Ç–º–µ–Ω–∞</button>
    </div>
  </div>
  <script src="quad-transform.js"></script>
  <script src="renderer.js"></script>
</body>
</html>